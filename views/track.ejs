<%- include('layout/header') %>
   
   <div class="wrapper">
      <div class="playlist-tracks-page">
         <input type="hidden" id="tracks_available" value="<%= track_ids_array %>"> 
         <div class="d-flex p-5">
            <div class="row">
               <div class="playlist-details">
                  <div class="d-flex" style="justify-content: space-around">
                     <div class="motion-poster">
                        <img src='<%= playlist_cover_poster %>' class="img-responsive">
                     </div>
                     <div class="motion-poster-detail mt-5 mx-3 flex-wrap d-flex ">
                        <div class="poster-details" style="color: <%= playlist_primary_color %> !important">
                           <div class="poster-title"><%= playlist_title %></div>
                           <div class="mt-4">
                              <div class="poster-label"> 
                                 PLAYLIST
                                 <%= playlist_description %> 
                              </div>
                              <div class="poster-total-songs text-muted my-1" style="font-weight:500">
                                 From: <%= playlist_owner_detail.name %> | Songs: <%= total_tracks %> | Followers: <%= playlist_followers %>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="extra-features mt-3">
                  <div class="play_all_tracks_btn">
                     <button type="btn" class="master-btn text-center mx-3 px-2" style="background-color:rgb(31 223 100);width:50px;height:50px">
                        <i class="fa-solid fa-play fa-xl"></i>
                     </button>
                  </div>
               </div>
               <div class="playlist-tracks my-3">
                  <table class="table table-borderless .table-responsive table-fixed">
                     <thead class="text-muted" style="border-bottom: .3px solid rgb(219 219 219)">
                        <tr>
                           <th colspan="1">#</th>
                           <th colspan="4">Title</th>
                           <th colspan="4">Album</th>
                           <th colspan="1"><i class="fa-solid fa-clock"></i></th>
                        </tr>
                     </thead>
                     <tbody style="color:white">
                        <% tracks.forEach( (data,index) =>{ %>
                           <tr id="<%= data.track.id %>">
                              <td colspan="1">
                                 <button class="btn play-track-btn" style="border:none" id="<%= data.track.id %>" onclick="play_track(this.id)">
                                    <i class="fa-solid fa-circle-play fa-xl"></i>
                                 </button>
                              </td>
                              <td colspan="5">
                                 <div class="d-flex" style="align-items: center;">
                                    <div class="track-poster" style="display:inline-block">
                                       <img src="<%= data.track.album.images[2].url  %>" width="40"/>
                                    </div>
                                    <div class="mx-2" style="display:inline-block">
                                       <span style="font-size:small;">
                                          <%= data.track.name %>
                                       </span>
                                       <div class="my-1 artist text-muted" style="font-size:x-small">
                                          <% data.track.artists.forEach( (artist) => { %>
                                             <span>
                                                | <%= artist.name %> |&nbsp;
                                             </span>
                                          <% }) %>
                                       </div>
                                    </div>
                                 </div>
                              </td>
                              <td colspan="3" style="font-size:small">
                                 <%= data.track.album.name  %>
                                 |
                                 <%= data.track.album.album_type  %> 
                              </td>
                              <td colspan="1" style="font-size:smaller">
                                 <%= moment.duration(data.track.duration_ms).minutes()
                                %>:<%= moment.duration(data.track.duration_ms).seconds()%>
                              </td>
                           </tr>
                        <% })%>
                     </tbody>
                  </table>
               </div>
            </div>
         </div>
         </div>
      </div>
   </div>
<%- include('layout/footer') %>